$("#modal-window").find(".modal-content").html("<%= j (render 'new') %>");
$("#modal-window").modal();

$('.select2').select2({ theme: 'bootstrap4', dropdownParent: $('#modal-window'), ajax: {
    url: '/skills/search',
    dataType: 'json',
    processResults: function (data) {
      // Transforms the top-level key of the response object from 'items' to 'results'
      console.log(data)
      return {
        results: data
      };
    // Additional AJAX parameters go here; see the end of this chapter for the full code of this example
  } }
});

$('.current_skills_level').barrating({
    theme: 'bars-movie'
  });

// const select = document.querySelector(".select2-selection.select2-selection--single")
// const initSearch = () => {
//   const myField = document.querySelector(".select2-search__field")

//   const searchResults = () => {

//     var myHeaders = new Headers();
//     myHeaders.append("apikey", "L3KvhyZDJd3h9SNWwjtoytqauGcvT3lK");

//     var requestOptions = {
//       method: 'GET',
//       redirect: 'follow',
//       headers: myHeaders
//     };

//     fetch("https://api.promptapi.com/skills?q="+myField.value, requestOptions)
//       .then(response => response.text())
//       .then(result => console.log(result))
//       .catch(error => console.log('error', error));

//   }

//   myField.addEventListener('keyup', searchResults)
// }

// select.addEventListener("onclick", initSearch)

